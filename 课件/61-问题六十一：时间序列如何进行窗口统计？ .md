



<p style="font-size: 90px;font-weight: bold;text-align: center;color: red;">带着问题学Pandas</p>
# <font color='red'>问题六十一：时间序列如何进行窗口统计？</font>

 **时间序列的窗口统计**：使用 `.rolling()` 创建滑动窗口，并应用自定义的函数来计算窗口内的统计指标，如均值、最值、方差、相关系数等。 

当使用 Pandas 的 `.rolling()` 方法时，你可以在滑动窗口对象上应用各种窗口函数来计算滑动窗口内的统计指标。下面是一个具体的案例，演示如何使用 `.rolling()` 方法计算时间序列数据的滑动窗口均值：

假设有以下的时间序列数据：

```python
import pandas as pd

# 创建一个示例时间序列
data = {'date': pd.date_range('2023-01-01', '2023-01-10'),
        'value': [10, 15, 20, 25, 30, 35, 40, 45, 50, 55]}
df = pd.DataFrame(data)
df.set_index('date', inplace=True)
print(df)
```

输出：

```
            value
date             
2023-01-01     10
2023-01-02     15
2023-01-03     20
2023-01-04     25
2023-01-05     30
2023-01-06     35
2023-01-07     40
2023-01-08     45
2023-01-09     50
2023-01-10     55
```

现在，我们可以使用 `.rolling()` 方法计算滑动窗口均值。以下示例计算了窗口大小为3的滑动窗口均值：

```python
window_size = 3
rolling_mean = df['value'].rolling(window=window_size).mean()
print(rolling_mean)
```

输出：

```
date
2023-01-01          NaN
2023-01-02          NaN
2023-01-03    15.000000
2023-01-04    20.000000
2023-01-05    25.000000
2023-01-06    30.000000
2023-01-07    35.000000
2023-01-08    40.000000
2023-01-09    45.000000
2023-01-10    50.000000
Name: value, dtype: float64
```

在结果中，前两个值为 NaN（因为窗口大小为3，所以前两个时间点没有足够的数据来计算均值），之后的值分别是对应窗口内的数据的均值。

你可以通过改变窗口大小和应用不同的窗口函数来计算滑动窗口内的其他统计指标，如标准差、最大值等。